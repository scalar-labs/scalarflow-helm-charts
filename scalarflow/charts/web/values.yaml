# Default values for scalarflow-web.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

web:
  replicaCount: 1
  image:
    repository: ghcr.io/scalar-labs/scalarflow-web
    pullPolicy: IfNotPresent
    tag: ""

  service:
    # -- Service type.
    type: ClusterIP
    # -- Service port.
    port: 3000
    # -- Container target port.
    targetPort: 3000
    # -- Protocol for the service.
    protocol: TCP
    # -- Service annotations.
    annotations: {}

  # Environment variables (native Kubernetes env array syntax)
  env:
    - name: NEXT_PUBLIC_SCALARFLOW_API_URL
      value: "https://api.scalarflow.example.com"
    - name: NEXT_PUBLIC_SCALARFLOW_ADMIN_EMAIL
      value: "admin@scalarflow.example.com"

  # PodSecurityContext holds pod-level security attributes and common container settings.
  podSecurityContext:
    seccompProfile:
      type: RuntimeDefault

  # SecurityContext holds security configuration that will be applied to a container.
  securityContext:
    capabilities:
      drop:
        - ALL
    runAsNonRoot: true
    allowPrivilegeEscalation: false

  # Health check path for liveness and readiness probes
  healthCheckPath: "/"

  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

imagePullSecrets:
  - name: regcred

serviceAccount:
  # -- Specify an existing service account name. If empty, the default service account in the namespace will be used.
  serviceAccountName: ""
  # -- Whether to automount the service account token.
  automountServiceAccountToken: false

podAnnotations: {}

# HTTPRoute configuration (Kubernetes Gateway API)
# Requires a Gateway resource to be deployed in the cluster
# See: https://gateway-api.sigs.k8s.io/
httpRoute:
  enabled: false
  # Annotations for the HTTPRoute
  annotations: {}
  # Reference to the parent Gateway(s)
  # The Gateway must exist and allow routes from this namespace
  parentRefs:
    - name: scalarflow-gateway
      # namespace: gateway-namespace  # Optional: specify if Gateway is in different namespace
      # sectionName: https            # Optional: specific listener name
  # Hostnames to match (required for host-based routing)
  hostnames:
    - scalarflow.example.com
  # Routing rules (optional - defaults to route all traffic to service)
  # rules:
  #   - matches:
  #       - path:
  #           type: PathPrefix
  #           value: /
  #     backendRefs:
  #       - name: web
  #         port: 3000

nodeSelector: {}

tolerations: []

affinity: {}

# Default values for scalarflow-web.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

web:
  replicaCount: 1
  image:
    repository: ghcr.io/scalar-labs/scalarflow-web
    pullPolicy: IfNotPresent
    tag: ""

  service:
    # -- Service type.
    type: ClusterIP
    # -- Service port.
    port: 3000
    # -- Container target port.
    targetPort: 3000
    # -- Protocol for the service.
    protocol: TCP
    # -- Service annotations.
    annotations: {}

  # Environment variables (native Kubernetes env array syntax)
  env:
    - name: NEXT_PUBLIC_SCALARFLOW_API_URL
      value: "https://api.scalarflow.example.com"
    - name: NEXT_PUBLIC_SCALARFLOW_ADMIN_EMAIL
      value: "admin@scalarflow.example.com"

  # PodSecurityContext holds pod-level security attributes and common container settings.
  podSecurityContext:
    seccompProfile:
      type: RuntimeDefault

  # SecurityContext holds security configuration that will be applied to a container.
  securityContext:
    capabilities:
      drop:
        - ALL
    runAsNonRoot: true
    allowPrivilegeEscalation: false

  # Health check path for liveness and readiness probes
  healthCheckPath: "/"

  # Resource limits
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

imagePullSecrets:
  - name: regcred

serviceAccount:
  # -- Specify an existing service account name. If not specified, a new service account will be created.
  serviceAccountName: ""
  # -- Whether to automount the service account token.
  automountServiceAccountToken: false

podAnnotations: {}

# Ingress configuration
# Supports any Kubernetes-compliant ingress controller (nginx, kong, traefik, etc.)
ingress:
  enabled: false
  # Set to your ingress controller class: nginx, kong, traefik, alb, etc.
  className: ""
  # Controller-specific annotations examples:
  # nginx:
  #   nginx.ingress.kubernetes.io/proxy-body-size: "50m"
  #   nginx.ingress.kubernetes.io/ssl-redirect: "true"
  # kong:
  #   konghq.com/strip-path: "false"
  #   konghq.com/protocols: "https"
  #   konghq.com/plugins: "rate-limiting"
  # traefik:
  #   traefik.ingress.kubernetes.io/router.tls: "true"
  # aws-alb:
  #   alb.ingress.kubernetes.io/scheme: internet-facing
  #   alb.ingress.kubernetes.io/target-type: ip
  annotations: {}
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  tls: []

nodeSelector: {}

tolerations: []

affinity: {}
